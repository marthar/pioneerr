<!DOCTYPE html>
<html>
  <head>
    <title>Trashy Fish</title>
    <meta name="description" content="trashy fish">
    <script src="https://aframe.io/releases/0.9.0/aframe.min.js"></script>

    <style>
      #videoElement {
        width:100%;
        height:100%;
        object-fit: cover;
        opacity:0.5;
        position:absolute;
      }

      .cover {
        width:100%;
        height:100%;
        opacity:0.5;
        position:absolute;
        background-color:#000055;
      }
    </style>

  </head>
    <body style="margin : 0px; overflow: hidden;">
    <video playsinline autoplay loop muted id="videoElement"></video>
    <div class='cover'></div>
    <a-scene gltf-model="dracoDecoderPath: draco_decoder.js;" background="transparent:true" fog="type: exponential; density: 0.15; color: blue; near:0; ">

      <a-assets>
        <a-asset-item id="cup" src="assets/starbucks_paper_cup/scene.gltf"></a-asset-item>
        <a-asset-item id="trash" src="assets/banana-lid.gltf"></a-asset-item>
        <a-asset-item id="angel" src="assets/clownfish/scene.gltf"></a-asset-item>

         <a-asset-item id="fish-obj" src="assets/fish/fishy.obj"></a-asset-item>
         <a-asset-item id="fish-mtl" src="assets/fish/fishy.mtl"></a-asset-item>
      </a-assets>
  
      <a-entity animation="property: rotation; to: 0 360 0; loop: true; dur: 40000">
        <a-entity gltf-model="#cup" 
                  scale="0.06 0.06 0.06"
                  position="0 1.6 -9"
                  rotation="0 -90 0">
        </a-entity>
      </a-entity>
      
      <a-entity animation="property: rotation; to: 0 360 0; loop: true; dur: 30000">
        <a-entity obj-model="obj: #fish-obj"
                  material="src: assets/fish/fish-skin.jpg; color: #696969; roughness: 1; metalness: 0"
                  scale=".01 .01 .01"
                  position="0 1.2 -4"
                  rotation="0 0 -90">
        </a-entity>
      </a-entity>
      
        <a-entity animation="property: rotation; to: 0 360 0; loop: true; dur: 20000">
        <a-entity obj-model="obj: #fish-obj"
                  material="src: assets/fish/fish-skin2.png; color: #696969; roughness: 1; metalness: 0"
                  scale=".01 .01 .01"
                  position="10 1.42 -4.4"
                  rotation="0 0 -90">
        </a-entity>
      </a-entity>
    
    </a-scene>
  </body>
    
    <script>
      document.getElementById("angel").addEventListener("model-error",function(e) { console.log(e); })

      var video = document.querySelector("#videoElement");

      if (navigator.mediaDevices.getUserMedia) {
        navigator.mediaDevices.getUserMedia({ video:  { facingMode: "environment" }})
        .then(function (stream) {
          video.srcObject = stream;
        })
        .catch(function (error) {
          console.log("Something went wrong!");
        });
      }
    
    </script>
</html>
